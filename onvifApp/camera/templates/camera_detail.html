{% extends 'base.html' %}

{% block content %}
<br>
<div class="ui container grid">
    <div class="eight wide computer sixteen wide mobile column">
        <div class="ui teal message" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
            <p style="font-size: 16px; font-style: italic">Device information :</p>
            {% if Manufacturer %}
            <p>Manufacturer : {{ Manufacturer }} </p>
            {% endif %}
            {% if Model %}
            <p>Model : {{ Model }} </p>
            {% endif %}
            {% if FirmwareVersion %}
            <p>Firmware Version : {{ FirmwareVersion }} </p>
            {% endif %}
            {% if SerialNumber %}
            <p>Serial Number : {{ SerialNumber }} </p>
            {% endif %}
            {% if HardwareId %}
            <p>Hardware Id : {{ HardwareId }} </p>
            {% endif %}
            <button id="reboot-button">Reboot</button>

        </div>
    </div>
    
    <div class="eight wide computer sixteen wide mobile column">
        <div class="ui olive message" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
            <p style="font-size: 16px;">System Date information :</p>
            <!-- {% if Sysdt_dt %}
            <p>System Time : {{ Sysdt_dt.Date.UTCDateTime.Time.Hour }}:{{ Sysdt_dt.Date.UTCDateTime.Time.Minute }} </p>
            {% endif %} -->
            {% if Sysdt_year %}
            <p>System Year/Month/Day : {{ Sysdt_year.Year }}/{{ Sysdt_year.Month }}/{{ Sysdt_year.Day }}  </p>
            {% endif %}
            {% if Sysdt_hour %}
            <p>Daylight Savings? : {{ Sysdt_hour }} </p>
            {% endif %}
            {% if Sysdt_tz %}
            <p>System Time Zone : {{ Sysdt_tz.TZ }} </p>
            {% endif %}
            {% if NTP_server %}
            <label>NTP-server: <input type="text" id="NTP-server" name="NTP-server" value="{{ NTP_server }}" placeholder="10.1.0.1" /></label><br><br>
            {% endif %}
            <button id="ntp-enable-button">Save</button>
        </div>
    </div>
</div>


<div class="ui container grid">
    <div class="eight wide computer sixteen wide mobile column">
        <div class="ui orange message" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
            <p style="font-size: 16px;">Network information :</p>
            {% if DHCP %}
            <label>DHCP <input type="checkbox" id="dhcp-status" name="dhcp-status" value=1 checked/></label><br>
            {% else %}            
            <label>DHCP <input type="checkbox" id="dhcp-status" name="dhcp-status" value=0 /></label><br>
            {% endif %}
            <label>IPv4 Address: <input type="text" id="network-ip" name="network-ip" value="{{ IPv4 }}" placeholder="192.168.1.12" /></label><br>
            <label>IPv4 Subnet Prefix: <input type="text" id="network-mask" name="network-mask" value="{{ PrefixLength }}" placeholder="24" /></label><br>
            <label>IPv4 Default Gateway: <input type="text" id="network-gateway" name="network-gateway" value="{{ Gateway }}" placeholder="192.168.1.1" /></label><br><br>
            <button id="submit-network-information">Save</button>
        </div>
    </div>

    <div class="eight wide computer sixteen wide mobile column">
        <div class="ui olive message" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
            <p style="font-size: 16px;">OSD information :</p>
            {% if OSD_caption == " " %}
            <label><input type="checkbox" id="osd_status" name="osd_status" value=osd_status/> Display Name</label><br><br> 
            <label>Camera Name: <input type="text" id="OSD_caption" name="OSD_caption" value="{{ OSD_caption }}" placeholder="camera name" disabled /></label><br><br>   
            {% else %}
            <label><input type="checkbox" id="osd_status" name="osd_status" value=osd_status checked/> Display Name</label><br><br> 
            <label>Camera Name: <input type="text" id="OSD_caption" name="OSD_caption" value="{{ OSD_caption }}" placeholder="camera name" /></label><br><br>   
            {% endif %}
            <button id="save-osd-button">Save</button>
    </div>
</div>

    
<div class="ui container grid">
    <div class="eight wide computer sixteen wide mobile column">
        <div class="ui yellow message" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
            <p style="font-size: 16px;">Image information :</p>
            <br> 
            <br> 
            <br> 
            <button id="submit-image-information">Save</button>
        </div>
    </div>

    <div class="eight wide computer sixteen wide mobile column">
        <div class="ui yellow message" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
            <p style="font-size: 16px;">Video information :</p>
            <br> 
            <br> 
            <br> 

 
            <button id="save-video-button">Save</button>
    </div>
</div>




<div class="ui container grid" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
    <div class="sixteen wide column">
    <div class="ui gray message">
        <div id="debug-result"></div>

    </div>
    </div>
</div>



<!------------------------------------------------------------------------------------------------------------->
<script>

   //================= ntp
   $(document).ready(function() {
        $('#ntp-enable-button').click(function() {
            ntp_server_ip =  $('#NTP-server').val();
                $.ajax({
                    url: "{% url 'operation' id=cam_id  %}",
                    data: {
                        'op': 'ntp',
                        'cam_ip': '{{cam_ip}}',
                        'cam_pass': '{{cam_pass}}',
                        'ntp_server_ip': ntp_server_ip
                    },
                    success: function(data) {                  
                        $('#debug-result').text(data.result);
                    }
                });
        });
    });
 

//================= osd
$(document).ready(function() {
        $('#save-osd-button').click(function() {
            caption =  $('#OSD_caption').val();
            var checkBox = document.getElementById("osd_status");
            $.ajax({
                url: "{% url 'operation' id=cam_id  %}",
                data: {
                    'op': '1',
                    'osd_status': checkBox.checked,
                    'caption': caption,
                    'cam_ip': '{{cam_ip}}',
                    'cam_pass': '{{cam_pass}}'
                },
                success: function(data) {
                    //var isEven = data.is_even;
                    //var message = isEven ? 'Сделано' : 'Ошибка';
                    $('#debug-result').text(data.result);
                }
            });
        });
    });

    const osd_status = document.querySelector('#osd_status');
    const OSD_caption = document.querySelector('#OSD_caption');
    osd_status.addEventListener('change', () => {if (osd_status.checked) {   
            OSD_caption.disabled = false;  //OSD_caption.value = '';
        } else {                     
            OSD_caption.disabled = true;
        }
    });  



 
//================= network
    $(document).ready(function() {
        $('#submit-network-information').click(function() {
            var checkBox = document.getElementById("dhcp-status");       
            
            new_dhcp = checkBox.checked;
            new_ip =  $('#network-ip').val();
            new_mask =  $('#network-mask').val();
            new_gateway =  $('#network-gateway').val();


            if (showAlert() == true) {
                $.ajax({
                    url: "{% url 'operation' id=cam_id  %}",
                    data: {
                        'op': '5',
                        'cam_ip': '{{cam_ip}}',
                        'cam_pass': '{{cam_pass}}',
                        'new_dhcp': new_dhcp,
                        'new_ip': new_ip,
                        'new_mask': new_mask,
                        'new_gateway': new_gateway
                    },
                    success: function(data) {
                        //showAlertReboot()
                        $('#debug-result').text(data.result);
                    }
                });
            }
        });
    });

const dhcp_status = document.querySelector('#dhcp-status');
    const network_ip = document.querySelector('#network-ip');
    const network_mask = document.querySelector('#network-mask');
    const network_gateway = document.querySelector('#network-gateway');
    dhcp_status.addEventListener('change', () => {
         if (dhcp_status.checked) {   
            network_ip.disabled = true; 
            network_mask.disabled = true;
            network_gateway.disabled = true;
        } else {                     
            network_ip.disabled = false;
            network_mask.disabled = false;
            network_gateway.disabled = false;
         }
    });  
    

   //================= reboot
   $(document).ready(function() {
        $('#reboot-button').click(function() {
            if (showAlert() == true) {
                $.ajax({
                    url: "{% url 'operation' id=cam_id  %}",
                    data: {
                        'op': 'reboot',
                        'cam_ip': '{{cam_ip}}',
                        'cam_pass': '{{cam_pass}}'
                    },
                    success: function(data) {                  
                        $('#debug-result').text(data.result);
                    }
                });
            }
        });
    });
    
//================= alerts
    function showAlert() {
			var result = confirm("Are you sure?");
			if (result == true) {
				return true
			} else {
				return false
			}
		}

    function showAlertReboot() {
			var result = alert("Rebooting....");
		}


    
</script>


<!--

<div class="ui container grid" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
    <div class="sixteen wide column">
    {% if syslog_resp_list %}
    <div class="ui blue message">
        <p style="font-size: 16px; font-style: Bold;">System Logs :</p>
        {% for log in syslog_resp_list %}
        <p style="font-size: 12px; font-style: italic"> {{ log }} </p>
        {% endfor %}
    {% else %}
        <p style="font-size: 12px;">Camera didn't return any logs</p>
    {% endif %}
    </div>
    </div>
</div>




<div class="ui container grid" style="font-size: 14px; font-family: Arial, Helvetica, sans-serif;">
        <div class="sixteen wide column">
        <div class="ui orange message">
        {% if sup_info %}
            <p  style="font-size: 14px; font-style: bold;"> Support information {{ sup_info }} </p>
        {% endif %}
        </div>
        </div>
</div>
-->




{% endblock %}